<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Graph Coloring Theory</title>
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            --info-gradient: linear-gradient(135deg, #e1f5fe 0%, #b3e5fc 100%);
            --warning-gradient: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
            --purple-gradient: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
            --teal-gradient: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --success-color: #4caf50;
            --warning-color: #ffc107;
            --danger-color: #f44336;
            --info-color: #0288d1;
            --light-bg: #f8f9fa;
            --dark-text: #333;
            --medium-text: #666;
            --light-text: #999;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark-text);
            background-attachment: fixed;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 20%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 10px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease;
            position: relative;
            padding: 20px;
            border-radius: 15px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(to right, #fff, #e0e0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
        }

        .header h1::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--primary-gradient);
            border-radius: 3px;
        }

        .mode-tabs {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .mode-tab {
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            background: rgba(26, 42, 108, 0.7);
            color: white;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.05em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .mode-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: 0.5s;
        }

        .mode-tab:hover::before {
            left: 100%;
        }

        .mode-tab.active {
            background: #b21f1f;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.5);
            z-index: 2;
        }

        .mode-tab:hover:not(.active) {
            background: rgba(178, 31, 31, 0.7);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.4);
        }

        .mode-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .mode-content.active {
            display: block;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            height: fit-content;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .control-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--primary-gradient);
        }

        .control-section {
            margin-bottom: 25px;
            position: relative;
        }

        .control-section h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1em;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-section h3::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--primary-color);
            border-radius: 50%;
        }

        .graph-btn, .demo-btn {
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            border: none;
            border-radius: 8px;
            background: var(--primary-gradient);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            text-align: center;
        }

        .graph-btn:hover, .demo-btn:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        .graph-btn::before, .demo-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: 0.5s;
        }

        .graph-btn:hover::before, .demo-btn:hover::before {
            left: 100%;
        }

        .demo-btn.secondary {
            background: var(--secondary-gradient);
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.3);
        }

        .demo-btn.secondary:hover {
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.5);
        }

        .demo-btn.success {
            background: var(--success-gradient);
            box-shadow: 0 4px 15px rgba(17, 153, 142, 0.3);
        }

        .demo-btn.success:hover {
            box-shadow: 0 8px 25px rgba(17, 153, 142, 0.5);
        }

        .color-palette {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }

        .color-option {
            aspect-ratio: 1;
            border-radius: 8px;
            border: 3px solid transparent;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .color-option:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            z-index: 2;
        }

        .color-option.selected {
            border-color: #333;
            box-shadow: 0 0 20px rgba(0,0,0,0.4);
            z-index: 3;
            transform: scale(1.15);
        }

        .color-option.selected::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 1.2em;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        .canvas-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }

        .canvas-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: var(--primary-gradient);
        }

        canvas {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        canvas:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: var(--teal-gradient);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-gradient);
        }

        .stat-card .label {
            font-size: 0.9em;
            color: var(--medium-text);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary-color);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .teaching-module {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .teaching-module::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #FF6B6B, #4ECDC4);
        }

        .module-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
        }

        .module-icon {
            font-size: 2.5em;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .module-title h2 {
            color: var(--primary-color);
            font-size: 1.8em;
            margin-bottom: 5px;
        }

        .module-title p {
            color: var(--medium-text);
            font-size: 1.05em;
        }

        .theorem-box {
            background: linear-gradient(135deg, #fff9c4 0%, #ffd54f 100%);
            border-left: 6px solid #FF8C00;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .theorem-box::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255, 140, 0, 0.1) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(50%, -50%);
        }

        .theorem-title {
            font-weight: bold;
            color: #e65100;
            margin-bottom: 15px;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .theorem-content {
            color: var(--dark-text);
            line-height: 1.8;
            font-size: 1.05em;
        }

        .step-by-step {
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        .step {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            border-left: 5px solid #009688;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        .step:hover {
            transform: translateX(8px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .step-number {
            font-size: 2em;
            font-weight: bold;
            color: #009688;
            min-width: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0, 150, 136, 0.1);
            border-radius: 50%;
            width: 50px;
            height: 50px;
        }

        .step-content h4 {
            color: var(--dark-text);
            margin-bottom: 10px;
            font-size: 1.15em;
        }

        .step-content p {
            color: var(--medium-text);
            line-height: 1.7;
        }

        .algorithm-viz {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            font-size: 0.95em;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .algorithm-viz::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(to bottom, #3498db, #2ecc71);
        }

        .algo-line {
            padding: 8px 15px;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            position: relative;
        }

        .algo-line:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .algo-line.highlight {
            background: rgba(255, 193, 7, 0.2);
            border-left-color: #ffc107;
        }

        .algo-comment {
            color: #6a9955;
        }

        .quiz-section {
            background: linear-gradient(135deg, #d1c4e9 0%, #b39ddb 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }

        .quiz-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary-gradient);
        }

        .quiz-question {
            font-weight: 600;
            color: #4527a0;
            margin-bottom: 20px;
            font-size: 1.15em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quiz-option {
            padding: 15px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 3px 8px rgba(0,0,0,0.08);
            position: relative;
            overflow: hidden;
        }

        .quiz-option:hover {
            border-color: var(--primary-color);
            transform: translateX(8px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }

        .quiz-option.correct {
            border-color: var(--success-color);
            background: #e8f5e9;
        }

        .quiz-option.incorrect {
            border-color: var(--danger-color);
            background: #ffebee;
        }

        .feedback-box {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        .feedback-box.show {
            display: block;
            animation: slideIn 0.3s ease;
        }

        .feedback-box.correct {
            background: #e8f5e9;
            border-left: 5px solid var(--success-color);
            color: #2e7d32;
        }

        .feedback-box.incorrect {
            background: #ffebee;
            border-left: 5px solid var(--danger-color);
            color: #c62828;
        }

        .interactive-proof {
            background: linear-gradient(135deg, #f8bbd0 0%, #f48fb1 100%);
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .proof-step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            border-left: 5px solid #e91e63;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        .proof-step:hover {
            transform: translateX(8px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.15);
        }

        .proof-step.revealed {
            border-left-color: var(--success-color);
        }

        .proof-step-header {
            font-weight: 600;
            color: #c2185b;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .proof-step-content {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px dashed #ddd;
            color: var(--medium-text);
            line-height: 1.8;
        }

        .proof-step.revealed .proof-step-content {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .cycle-detector {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .cycle-list {
            max-height: 250px;
            overflow-y: auto;
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }

        .cycle-item {
            padding: 12px 18px;
            background: white;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .cycle-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .cycle-item.odd {
            border-left-color: var(--danger-color);
            background: #ffebee;
        }

        .cycle-item.even {
            border-left-color: var(--success-color);
            background: #e8f5e9;
        }

        .badge {
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.85em;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .badge.odd {
            background: var(--danger-color);
            color: white;
        }

        .badge.even {
            background: var(--success-color);
            color: white;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .control-panel {
                order: 2;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }
            .mode-tabs {
                flex-direction: column;
                gap: 10px;
            }
            .teaching-module {
                padding: 20px;
            }
            
            .step {
                flex-direction: column;
                gap: 10px;
            }
            
            .step-number {
                align-self: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Advanced Graph Coloring Theory</h1>
            <div class="mode-tabs">
                <button class="mode-tab active" onclick="switchMode('explore')">üî¨ Explore Mode</button>
                <button class="mode-tab" onclick="switchMode('learn')">üìö Learn Mode</button>
                <button class="mode-tab" onclick="switchMode('practice')">üéØ Practice Mode</button>
            </div>
        </div>

        <!-- EXPLORE MODE -->
        <div id="exploreMode" class="mode-content active">
            <div class="main-grid">
                <div class="control-panel">
                    <div class="control-section">
                        <h3>üìä Graph Library</h3>
                        <button class="graph-btn" onclick="loadGraph('simple')">Simple Graph</button>
                        <button class="graph-btn" onclick="loadGraph('complete')">Complete Graph K‚ÇÖ</button>
                        <button class="graph-btn" onclick="loadGraph('bipartite')">Bipartite Graph</button>
                        <button class="graph-btn" onclick="loadGraph('cycle')">Cycle Graph C‚ÇÜ</button>
                        <button class="graph-btn" onclick="loadGraph('petersen')">Petersen Graph</button>
                        <button class="graph-btn" onclick="loadGraph('wheel')">Wheel Graph</button>
                        <button class="graph-btn" onclick="loadGraph('tree')">Tree Graph</button>
                    </div>
                    <div class="control-section">
                        <h3>üé® Color Palette</h3>
                        <div class="color-palette">
                            <div class="color-option selected" style="background: #FF0000" onclick="selectColor('#FF0000')"></div>
                            <div class="color-option" style="background: #00FF00" onclick="selectColor('#00FF00')"></div>
                            <div class="color-option" style="background: #0000FF" onclick="selectColor('#0000FF')"></div>
                            <div class="color-option" style="background: #FFFF00" onclick="selectColor('#FFFF00')"></div>
                            <div class="color-option" style="background: #FF00FF" onclick="selectColor('#FF00FF')"></div>
                            <div class="color-option" style="background: #00FFFF" onclick="selectColor('#00FFFF')"></div>
                            <div class="color-option" style="background: #FFA500" onclick="selectColor('#FFA500')"></div>
                            <div class="color-option" style="background: #800080" onclick="selectColor('#800080')"></div>
                        </div>
                    </div>
                    <div class="control-section">
                        <h3>‚ö° Actions</h3>
                        <button class="demo-btn" onclick="autoColor()">Auto Color (Greedy)</button>
                        <button class="demo-btn secondary" onclick="bfsColoring()">BFS 2-Coloring</button>
                        <button class="demo-btn success" onclick="detectCycles()">Detect Cycles</button>
                        <button class="demo-btn" onclick="clearColors()">Clear Colors</button>
                    </div>
                </div>
                <div class="canvas-container">
                    <canvas id="graphCanvas"></canvas>
                    <div class="stats">
                        <div class="stat-card">
                            <div class="label">Vertices</div>
                            <div class="value" id="vertexCount">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">Edges</div>
                            <div class="value" id="edgeCount">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">Colors Used</div>
                            <div class="value" id="colorCount">0</div>
                        </div>
                        <div class="stat-card">
                            <div class="label">Chromatic Number œá(G)</div>
                            <div class="value" id="chromaticNumber">?</div>
                        </div>
                    </div>
                    <div id="cycleDetectorOutput" class="cycle-detector" style="display:none">
                        <h3 style="color: #667eea; margin-bottom: 15px;">üîç Cycle Analysis</h3>
                        <div id="cycleList" class="cycle-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEARN MODE -->
        <div id="learnMode" class="mode-content">
            <div class="teaching-module">
                <div class="module-header">
                    <div class="module-icon">üìñ</div>
                    <div class="module-title">
                        <h2>Chromatic Number Fundamentals</h2>
                        <p>Understanding the minimum colors needed for proper graph coloring</p>
                    </div>
                </div>

                <div class="theorem-box">
                    <div class="theorem-title">üìê Theorem: Chromatic Number Definition</div>
                    <div class="theorem-content">
                        The <strong>chromatic number œá(G)</strong> of a graph G is the minimum number of colors needed to color all vertices such that no two adjacent vertices share the same color. This is formally called a <strong>proper coloring</strong>.
                    </div>
                </div>

                <div class="step-by-step">
                    <h3 style="margin-bottom: 20px; color: #667eea;">Step-by-Step: Greedy Coloring Algorithm</h3>
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Initialize</h4>
                            <p>Order the vertices arbitrarily (v‚ÇÅ, v‚ÇÇ, ..., v‚Çô). Start with an empty color assignment.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Color First Vertex</h4>
                            <p>Assign color 1 to vertex v‚ÇÅ. This is always valid since there are no constraints yet.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Iterate Through Vertices</h4>
                            <p>For each remaining vertex v·µ¢, find the smallest color not used by any of its already-colored neighbors.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Assign Color</h4>
                            <p>Assign the smallest available color to v·µ¢. If all existing colors are taken, introduce a new color.</p>
                        </div>
                    </div>
                </div>

                <div class="algorithm-viz">
                    <div class="algo-line"><span class="algo-comment">// Greedy Graph Coloring Algorithm</span></div>
                    <div class="algo-line">function greedyColoring(graph G):</div>
                    <div class="algo-line">&nbsp;&nbsp;&nbsp;&nbsp;colors = []  <span class="algo-comment">// Store color for each vertex</span></div>
                    <div class="algo-line">&nbsp;&nbsp;&nbsp;&nbsp;for each vertex v in G:</div>
                    <div class="algo-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;neighborColors = getNeighborColors(v)</div>
                    <div class="algo-line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colors[v] = smallestAvailableColor(neighborColors)</div>
                    <div class="algo-line">&nbsp;&nbsp;&nbsp;&nbsp;return colors</div>
                </div>
            </div>

            <div class="teaching-module">
                <div class="module-header">
                    <div class="module-icon">üîÑ</div>
                    <div class="module-title">
                        <h2>The Bipartite Characterization Theorem</h2>
                        <p>When graphs can be colored with exactly 2 colors</p>
                    </div>
                </div>

                <div class="theorem-box">
                    <div class="theorem-title">üéØ Key Theorem: Bipartite ‚ü∫ No Odd Cycles</div>
                    <div class="theorem-content">
                        A graph G is 2-chromatic (bipartite) <strong>if and only if</strong> it contains no odd cycles. This means:
                        <br><br>
                        ‚Ä¢ G is bipartite ‚üπ G has no odd cycles<br>
                        ‚Ä¢ G has no odd cycles ‚üπ G is bipartite
                    </div>
                </div>

                <div class="interactive-proof">
                    <h3 style="margin-bottom: 20px; color: #7b1fa2;">üìù Interactive Proof (Click to Reveal)</h3>
                    <div class="proof-step" onclick="toggleProof(this)">
                        <div class="proof-step-header">
                            <span>Part 1: If G is bipartite, then G has no odd cycles</span>
                            <span>‚ñ∂</span>
                        </div>
                        <div class="proof-step-content">
                            Assume G is bipartite with partitions U and W. Every edge connects a vertex in U to a vertex in W. In any cycle, vertices must alternate between U and W. Starting in U, we have: U ‚Üí W ‚Üí U ‚Üí W ‚Üí ... If we return to U (completing the cycle), we must have traversed an even number of edges. Therefore, all cycles have even length.
                        </div>
                    </div>
                    <div class="proof-step" onclick="toggleProof(this)">
                        <div class="proof-step-header">
                            <span>Part 2: If G has no odd cycles, then G is bipartite</span>
                            <span>‚ñ∂</span>
                        </div>
                        <div class="proof-step-content">
                            We'll prove this by attempting a 2-coloring using BFS. Start at any vertex v, color it color 1. Color all neighbors color 2. Color their neighbors color 1, and so on. If we encounter a vertex that should be two different colors, we've found an odd cycle. Since G has no odd cycles, this never happens, so the 2-coloring succeeds. The two color classes form the bipartition.
                        </div>
                    </div>
                    <div class="proof-step" onclick="toggleProof(this)">
                        <div class="proof-step-header">
                            <span>Why odd cycles require 3 colors</span>
                            <span>‚ñ∂</span>
                        </div>
                        <div class="proof-step-content">
                            Consider C‚ÇÖ (a 5-cycle). Label vertices v‚ÇÅ, v‚ÇÇ, v‚ÇÉ, v‚ÇÑ, v‚ÇÖ in order. Try coloring: v‚ÇÅ = red, v‚ÇÇ = blue, v‚ÇÉ = red, v‚ÇÑ = blue, v‚ÇÖ = red. But now v‚ÇÖ (red) is adjacent to v‚ÇÅ (red) ‚Äî conflict! We need a third color for either v‚ÇÅ or v‚ÇÖ. This pattern holds for all odd cycles.
                        </div>
                    </div>
                </div>

                <div class="step-by-step">
                    <h3 style="margin-bottom: 20px; color: #667eea;">BFS 2-Coloring Algorithm</h3>
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Initialize Queue</h4>
                            <p>Pick any starting vertex s, color it with color 1, and add it to a queue Q.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Process Queue</h4>
                            <p>While Q is not empty: dequeue vertex v. For each uncolored neighbor u of v, assign u the opposite color of v and enqueue u.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Check for Conflicts</h4>
                            <p>If we encounter a neighbor that's already colored with the same color as v, we've found an odd cycle. The graph is NOT bipartite.</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>Success!</h4>
                            <p>If we color all vertices without conflicts, the graph is bipartite. The two color classes form the partition.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="teaching-module">
                <div class="module-header">
                    <div class="module-icon">üìä</div>
                    <div class="module-title">
                        <h2>Common Graph Types & Their Chromatic Numbers</h2>
                        <p>Quick reference guide for identifying œá(G)</p>
                    </div>
                </div>

                <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                    <thead>
                        <tr style="background: #667eea; color: white;">
                            <th style="padding: 15px; text-align: left;">Graph Type</th>
                            <th style="padding: 15px; text-align: center;">œá(G)</th>
                            <th style="padding: 15px; text-align: center;">Bipartite?</th>
                            <th style="padding: 15px; text-align: left;">Reason</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: #e8f5e9;">
                            <td style="padding: 12px;">Path Graph P‚Çô</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">2</td>
                            <td style="padding: 12px; text-align: center;">‚úì</td>
                            <td style="padding: 12px;">No cycles at all</td>
                        </tr>
                        <tr style="background: #f5f5f5;">
                            <td style="padding: 12px;">Tree (any)</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">2</td>
                            <td style="padding: 12px; text-align: center;">‚úì</td>
                            <td style="padding: 12px;">Acyclic structure</td>
                        </tr>
                        <tr style="background: #e8f5e9;">
                            <td style="padding: 12px;">Even Cycle C‚Çô (n even)</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">2</td>
                            <td style="padding: 12px; text-align: center;">‚úì</td>
                            <td style="padding: 12px;">No odd cycles</td>
                        </tr>
                        <tr style="background: #ffebee;">
                            <td style="padding: 12px;">Odd Cycle C‚Çô (n odd)</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">3</td>
                            <td style="padding: 12px; text-align: center;">‚úó</td>
                            <td style="padding: 12px;">Contains odd cycle</td>
                        </tr>
                        <tr style="background: #f5f5f5;">
                            <td style="padding: 12px;">Complete Graph K‚Çô</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">n</td>
                            <td style="padding: 12px; text-align: center;">‚úó (n‚â•3)</td>
                            <td style="padding: 12px;">All vertices adjacent</td>
                        </tr>
                        <tr style="background: #e8f5e9;">
                            <td style="padding: 12px;">Complete Bipartite K‚Çò,‚Çô</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">2</td>
                            <td style="padding: 12px; text-align: center;">‚úì</td>
                            <td style="padding: 12px;">Bipartite by definition</td>
                        </tr>
                        <tr style="background: #f5f5f5;">
                            <td style="padding: 12px;">Star Graph S‚Çô</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">2</td>
                            <td style="padding: 12px; text-align: center;">‚úì</td>
                            <td style="padding: 12px;">Tree structure</td>
                        </tr>
                        <tr style="background: #fff3e0;">
                            <td style="padding: 12px;">Petersen Graph</td>
                            <td style="padding: 12px; text-align: center; font-weight: bold;">3</td>
                            <td style="padding: 12px; text-align: center;">‚úó</td>
                            <td style="padding: 12px;">Contains odd cycles</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- PRACTICE MODE -->
        <div id="practiceMode" class="mode-content">
            <div class="teaching-module">
                <div class="module-header">
                    <div class="module-icon">üéØ</div>
                    <div class="module-title">
                        <h2>Interactive Quiz: Test Your Understanding</h2>
                        <p>Challenge yourself with these graph coloring problems</p>
                    </div>
                </div>

                <div class="quiz-section">
                    <div class="quiz-question">Question 1: What is œá(C‚Çà)?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, false, 1, 'C‚Çà is an even cycle with 8 vertices.')">
                            A) œá(C‚Çà) = 3
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 1, 'Correct! C‚Çà is an even cycle, so it has no odd cycles and can be 2-colored.')">
                            B) œá(C‚Çà) = 2
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 1, 'C‚Çà only needs 2 colors, not 4.')">
                            C) œá(C‚Çà) = 4
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 1, 'A cycle always needs at least 2 colors.')">
                            D) œá(C‚Çà) = 1
                        </div>
                    </div>
                    <div id="feedback1" class="feedback-box"></div>
                </div>

                <div class="quiz-section">
                    <div class="quiz-question">Question 2: Which of the following is NOT bipartite?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, false, 2, 'Trees are always bipartite since they contain no cycles.')">
                            A) Any tree
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 2, 'Correct! The triangle C‚ÇÉ is an odd cycle, so it requires 3 colors and is not bipartite.')">
                            B) Triangle (C‚ÇÉ)
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 2, 'A path is a tree, so it\'s bipartite.')">
                            A) Path graph P‚ÇÅ‚ÇÄ
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 2, 'K‚ÇÉ,‚ÇÑ is bipartite by definition (complete bipartite graph).')">
                            D) Complete bipartite K‚ÇÉ,‚ÇÑ
                        </div>
                    </div>
                    <div id="feedback2" class="feedback-box"></div>
                </div>

                <div class="quiz-section">
                    <div class="quiz-question">Question 3: If a graph G has 2 components: C‚ÇÑ and C‚ÇÖ, what is œá(G)?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, false, 3, 'This would be if we added the chromatic numbers, but we take the maximum.')">
                            A) œá(G) = 5
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 3, 'C‚ÇÑ is bipartite (œá=2), but C‚ÇÖ requires 3 colors.')">
                            B) œá(G) = 2
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 3, 'Correct! For disconnected graphs, œá(G) = max{œá(C‚ÇÑ), œá(C‚ÇÖ)} = max{2, 3} = 3')">
                            C) œá(G) = 3
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 3, '4 colors is more than necessary.')">
                            D) œá(G) = 4
                        </div>
                    </div>
                    <div id="feedback3" class="feedback-box"></div>
                </div>

                <div class="quiz-section">
                    <div class="quiz-question">Question 4: What characterizes a bipartite graph?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, false, 4, 'Being connected is not required for bipartiteness.')">
                            A) It must be connected
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 4, 'Correct! A graph is bipartite if and only if it contains no odd cycles.')">
                            B) It contains no odd cycles
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 4, 'Many bipartite graphs have more than 2 vertices.')">
                            C) It has exactly 2 vertices
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 4, 'Bipartite graphs can have even cycles.')">
                            D) It has no cycles at all
                        </div>
                    </div>
                    <div id="feedback4" class="feedback-box"></div>
                </div>

                <div class="quiz-section">
                    <div class="quiz-question">Question 5: What is the chromatic number of the complete graph K‚ÇÖ?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, false, 5, 'K‚ÇÖ needs more than 2 colors since all vertices are adjacent.')">
                            A) œá(K‚ÇÖ) = 2
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 5, 'With all vertices adjacent to each other, 3 colors isn\'t enough.')">
                            B) œá(K‚ÇÖ) = 3
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, false, 5, '4 colors isn\'t quite enough for 5 mutually adjacent vertices.')">
                            C) œá(K‚ÇÖ) = 4
                        </div>
                        <div class="quiz-option" onclick="checkAnswer(this, true, 5, 'Correct! In K‚Çô, every vertex is adjacent to every other vertex, so we need n different colors. œá(K‚ÇÖ) = 5.')">
                            D) œá(K‚ÇÖ) = 5
                        </div>
                    </div>
                    <div id="feedback5" class="feedback-box"></div>
                </div>
            </div>

            <div class="teaching-module">
                <div class="module-header">
                    <div class="module-icon">‚úçÔ∏è</div>
                    <div class="module-title">
                        <h2>Practice Problems</h2>
                        <p>Work through these problems to master the concepts</p>
                    </div>
                </div>

                <div class="step-by-step">
                    <h3 style="margin-bottom: 20px; color: #667eea;">Problem 1: Prove Trees are Bipartite</h3>
                    <div class="interactive-proof">
                        <div class="proof-step" onclick="toggleProof(this)">
                            <div class="proof-step-header">
                                <span>Hint 1: What property defines a tree?</span>
                                <span>‚ñ∂</span>
                            </div>
                            <div class="proof-step-content">
                                A tree is a connected graph with no cycles. This is the key property we'll use.
                            </div>
                        </div>
                        <div class="proof-step" onclick="toggleProof(this)">
                            <div class="proof-step-header">
                                <span>Hint 2: How does this relate to bipartiteness?</span>
                                <span>‚ñ∂</span>
                            </div>
                            <div class="proof-step-content">
                                Remember the characterization theorem: a graph is bipartite if and only if it has no odd cycles. Since trees have NO cycles at all, they certainly have no odd cycles!
                            </div>
                        </div>
                        <div class="proof-step" onclick="toggleProof(this)">
                            <div class="proof-step-header">
                                <span>Complete Proof</span>
                                <span>‚ñ∂</span>
                            </div>
                            <div class="proof-step-content">
                                <strong>Proof:</strong> Let T = (V, E) be any tree with vertex set V and edge set E.<br><br>
                                
                                <strong>Part 1: Trees have no odd cycles</strong><br>
                                By definition, a tree is a connected acyclic graph. This means T contains no cycles whatsoever. Since there are no cycles, there are certainly no odd cycles.<br><br>
                                
                                <strong>Part 2: Application of the Bipartite Characterization Theorem</strong><br>
                                The Bipartite Characterization Theorem states: A graph G is bipartite if and only if it contains no odd cycles.<br><br>
                                
                                Since we've established that T contains no odd cycles, by the theorem, T must be bipartite.<br><br>
                                
                                <strong>Part 3: Constructive Proof via BFS Coloring</strong><br>
                                We can explicitly construct a 2-coloring as follows:<br>
                                1. Choose any vertex r ‚àà V as the root<br>
                                2. Perform a Breadth-First Search (BFS) starting from r<br>
                                3. Color the root r with color 0<br>
                                4. For each vertex v at distance d from r:<br>
                                &nbsp;&nbsp;&nbsp;‚Ä¢ If d is even, color v with color 0<br>
                                &nbsp;&nbsp;&nbsp;‚Ä¢ If d is odd, color v with color 1<br><br>
                                
                                This produces a valid 2-coloring because in a tree, any two adjacent vertices differ in their distance from the root by exactly 1 (one is a parent, the other a child). Therefore, adjacent vertices will always have different colors.<br><br>
                                
                                <strong>Conclusion:</strong> Since T is bipartite, œá(T) = 2. ‚àé
                            </div>
                        </div>
                    </div>
                </div>

                <div class="step-by-step">
                    <h3 style="margin-bottom: 20px; color: #667eea;">Problem 2: BFS Algorithm for Bipartite Detection</h3>
                    <p style="margin-bottom: 15px; color: #666;">Describe how to use BFS to determine if a graph is bipartite.</p>
                    <div class="interactive-proof">
                        <div class="proof-step" onclick="toggleProof(this)">
                            <div class="proof-step-header">
                                <span>Algorithm Overview</span>
                                <span>‚ñ∂</span>
                            </div>
                            <div class="proof-step-content">
                                We'll try to 2-color the graph using BFS. If successful, the graph is bipartite. If we find a conflict, it's not bipartite.
                            </div>
                        </div>
                        <div class="proof-step" onclick="toggleProof(this)">
                            <div class="proof-step-header">
                                <span>Detailed Steps</span>
                                <span>‚ñ∂</span>
                            </div>
                            <div class="proof-step-content">
                                1. Choose any starting vertex s and color it color 0<br>
                                2. Add s to a queue Q<br>
                                3. While Q is not empty:<br>
                                &nbsp;&nbsp;&nbsp;- Dequeue vertex v<br>
                                &nbsp;&nbsp;&nbsp;- For each uncolored neighbor u:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Ä¢ Color u with opposite color of v<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Ä¢ Enqueue u<br>
                                &nbsp;&nbsp;&nbsp;- For each already-colored neighbor u:<br>
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;‚Ä¢ If u has the same color as v, return "NOT BIPARTITE"<br>
                                4. If we finish without conflicts, return "BIPARTITE"
                            </div>
                        </div>
                        <div class="proof-step" onclick="toggleProof(this)">
                            <div class="proof-step-header">
                                <span>Why This Works</span>
                                <span>‚ñ∂</span>
                            </div>
                            <div class="proof-step-content">
                                If we find two adjacent vertices with the same color, they must be part of an odd cycle. BFS explores the graph level by level, alternating colors. A conflict occurs precisely when there's an edge connecting vertices at the same "distance parity" from the start, which only happens in odd cycles.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        let vertices = [];
        let edges = [];
        let selectedColor = '#FF6B6B';
        let currentGraph = null;
        let animationQueue = [];
        let isAnimating = false;

        const DEFAULT_WIDTH = 900;
        const DEFAULT_HEIGHT = 600;

        const graphs = {
            simple: {
                vertices: [
                    {x: 150, y: 200, label: 'A'},
                    {x: 300, y: 100, label: 'B'},
                    {x: 450, y: 200, label: 'C'},
                    {x: 450, y: 350, label: 'D'},
                    {x: 300, y: 450, label: 'E'},
                    {x: 150, y: 350, label: 'F'}
                ],
                edges: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,0], [0,3], [1,3], [1,4]],
                chromatic: 3
            },
            complete: {
                vertices: [
                    {x: 450, y: 150, label: 'v‚ÇÅ'},
                    {x: 650, y: 280, label: 'v‚ÇÇ'},
                    {x: 550, y: 480, label: 'v‚ÇÉ'},
                    {x: 350, y: 480, label: 'v‚ÇÑ'},
                    {x: 250, y: 280, label: 'v‚ÇÖ'}
                ],
                edges: [[0,1], [0,2], [0,3], [0,4], [1,2], [1,3], [1,4], [2,3], [2,4], [3,4]],
                chromatic: 5
            },
            bipartite: {
                vertices: [
                    {x: 200, y: 150, label: 'U‚ÇÅ'},
                    {x: 200, y: 250, label: 'U‚ÇÇ'},
                    {x: 200, y: 350, label: 'U‚ÇÉ'},
                    {x: 200, y: 450, label: 'U‚ÇÑ'},
                    {x: 700, y: 150, label: 'V‚ÇÅ'},
                    {x: 700, y: 250, label: 'V‚ÇÇ'},
                    {x: 700, y: 350, label: 'V‚ÇÉ'},
                    {x: 700, y: 450, label: 'V‚ÇÑ'}
                ],
                edges: [[0,4], [0,5], [0,6], [0,7], [1,4], [1,5], [1,6], [1,7], [2,4], [2,5], [2,6], [2,7], [3,4], [3,5], [3,6], [3,7]],
                chromatic: 2
            },
            cycle: {
                vertices: [
                    {x: 450, y: 100, label: 'v‚ÇÅ'},
                    {x: 600, y: 180, label: 'v‚ÇÇ'},
                    {x: 650, y: 320, label: 'v‚ÇÉ'},
                    {x: 600, y: 460, label: 'v‚ÇÑ'},
                    {x: 450, y: 540, label: 'v‚ÇÖ'},
                    {x: 300, y: 460, label: 'v‚ÇÜ'},
                    {x: 250, y: 320, label: 'v‚Çá'},
                    {x: 300, y: 180, label: 'v‚Çà'}
                ],
                edges: [[0,1], [1,2], [2,3], [3,4], [4,5], [5,6], [6,7], [7,0]],
                chromatic: 2
            },
            petersen: {
                vertices: [
                    {x: 450, y: 100, label: 'a'},
                    {x: 650, y: 230, label: 'b'},
                    {x: 590, y: 480, label: 'c'},
                    {x: 310, y: 480, label: 'd'},
                    {x: 250, y: 230, label: 'e'},
                    {x: 450, y: 240, label: 'f'},
                    {x: 540, y: 330, label: 'g'},
                    {x: 490, y: 420, label: 'h'},
                    {x: 410, y: 420, label: 'i'},
                    {x: 360, y: 330, label: 'j'}
                ],
                edges: [
                    [0,1], [1,2], [2,3], [3,4], [4,0],
                    [0,5], [1,6], [2,7], [3,8], [4,9],
                    [5,7], [7,9], [9,6], [6,8], [8,5]
                ],
                chromatic: 3
            },
            wheel: {
                vertices: [
                    {x: 450, y: 300, label: 'center'},
                    {x: 450, y: 120, label: 'v‚ÇÅ'},
                    {x: 630, y: 250, label: 'v‚ÇÇ'},
                    {x: 630, y: 450, label: 'v‚ÇÉ'},
                    {x: 450, y: 580, label: 'v‚ÇÑ'},
                    {x: 270, y: 450, label: 'v‚ÇÖ'},
                    {x: 270, y: 250, label: 'v‚ÇÜ'}
                ],
                edges: [[0,1], [0,2], [0,3], [0,4], [0,5], [0,6], [1,2], [2,3], [3,4], [4,5], [5,6], [6,1]],
                chromatic: 3
            },
            tree: {
                vertices: [
                    {x: 450, y: 100, label: 'root'},
                    {x: 300, y: 250, label: 'L'},
                    {x: 600, y: 250, label: 'R'},
                    {x: 200, y: 400, label: 'LL'},
                    {x: 400, y: 400, label: 'LR'},
                    {x: 500, y: 400, label: 'RL'},
                    {x: 700, y: 400, label: 'RR'}
                ],
                edges: [[0,1], [0,2], [1,3], [1,4], [2,5], [2,6]],
                chromatic: 2
            }
        };

        function resizeCanvas() {
            const parent = canvas.parentElement;
            let w = Math.min(parent.offsetWidth - 50, DEFAULT_WIDTH);
            let h = Math.round(DEFAULT_HEIGHT * (w / DEFAULT_WIDTH));
            canvas.width = w;
            canvas.height = h;
            draw();
        }

        function scaleXY(x, y) {
            return [
                (x / DEFAULT_WIDTH) * canvas.width,
                (y / DEFAULT_HEIGHT) * canvas.height
            ];
        }

        function loadGraph(type) {
            currentGraph = type;
            const graph = graphs[type];
            vertices = graph.vertices.map(v => ({...v, color: null}));
            edges = graph.edges;
            document.getElementById('cycleDetectorOutput').style.display = 'none';
            updateStats();
            resizeCanvas();
        }

        function selectColor(color) {
            selectedColor = color;
            document.querySelectorAll('.color-option').forEach(el => {
                el.classList.remove('selected');
                if (el.style.background === color) {
                    el.classList.add('selected');
                }
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw edges
            ctx.strokeStyle = '#ccc';
            ctx.lineWidth = 3;
            edges.forEach(([i, j]) => {
                const [x1, y1] = scaleXY(vertices[i].x, vertices[i].y);
                const [x2, y2] = scaleXY(vertices[j].x, vertices[j].y);
                ctx.beginPath();
                ctx.moveTo(x1, y1);
                ctx.lineTo(x2, y2);
                ctx.stroke();
            });
            
            // Draw vertices
            vertices.forEach(v => {
                const [vx, vy] = scaleXY(v.x, v.y);
                let r = Math.max(Math.min(canvas.width, canvas.height) * 0.035, 15);
                
                ctx.beginPath();
                ctx.arc(vx, vy, r, 0, Math.PI * 2);
                ctx.fillStyle = v.color || '#ffffff';
                ctx.fill();
                ctx.strokeStyle = '#333';
                ctx.lineWidth = 3;
                ctx.stroke();
                
                ctx.fillStyle = '#333';
                ctx.font = `bold ${Math.max(Math.round(r*0.7), 12)}px Arial`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(v.label, vx, vy);
            });
        }

        function getClickedVertex(x, y) {
            for (let [idx, v] of vertices.entries()) {
                const [vx, vy] = scaleXY(v.x, v.y);
                let r = Math.max(Math.min(canvas.width, canvas.height) * 0.035, 15);
                const dist = Math.sqrt((x - vx) ** 2 + (y - vy) ** 2);
                if (dist < r) return idx;
            }
            return null;
        }

        function isValidColoring(vertexIdx, color) {
            for (let [i, j] of edges) {
                if (i === vertexIdx || j === vertexIdx) {
                    const neighbor = i === vertexIdx ? j : i;
                    if (vertices[neighbor].color === color) {
                        return false;
                    }
                }
            }
            return true;
        }

        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            const idx = getClickedVertex(x, y);
            if (idx !== null) {
                if (isValidColoring(idx, selectedColor)) {
                    vertices[idx].color = selectedColor;
                    draw();
                    updateStats();
                } else {
                    alert('‚ùå Invalid coloring! Adjacent vertices cannot have the same color.');
                }
            }
        });

        function autoColor() {
            const colors = ['#FF0000', '#00FF00', '#0000FF', '#FFFF00', '#FF00FF', '#00FFFF', '#FFA500', '#800080'];
            vertices.forEach(v => v.color = null);
            vertices.forEach((v, idx) => {
                for (let color of colors) {
                    if (isValidColoring(idx, color)) {
                        v.color = color;
                        break;
                    }
                }
            });
            draw();
            updateStats();
        }

        function bfsColoring() {
            vertices.forEach(v => v.color = null);
            const colors = ['#FF0000', '#00FF00'];
            const colored = new Array(vertices.length).fill(false);
            const color = new Array(vertices.length).fill(-1);
            
            const queue = [0];
            colored[0] = true;
            color[0] = 0;
            
            while (queue.length > 0) {
                const v = queue.shift();
                vertices[v].color = colors[color[v]];
                
                for (let [i, j] of edges) {
                    let neighbor = -1;
                    if (i === v) neighbor = j;
                    if (j === v) neighbor = i;
                    
                    if (neighbor !== -1 && !colored[neighbor]) {
                        colored[neighbor] = true;
                        color[neighbor] = 1 - color[v];
                        queue.push(neighbor);
                    } else if (neighbor !== -1 && color[neighbor] === color[v]) {
                        alert('‚ö†Ô∏è Graph contains odd cycle! Not bipartite.');
                        clearColors();
                        return;
                    }
                }
            }
            
            draw();
            updateStats();
            alert('‚úÖ Graph is bipartite! Successfully 2-colored.');
        }

        function detectCycles() {
            const cycles = findAllCycles();
            const cycleList = document.getElementById('cycleList');
            cycleList.innerHTML = '';
            
            if (cycles.length === 0) {
                cycleList.innerHTML = '<p style="color: #4caf50; font-weight: bold;">‚úÖ No cycles detected! This is a tree.</p>';
            } else {
                cycles.forEach(cycle => {
                    const isOdd = cycle.length % 2 === 1;
                    const div = document.createElement('div');
                    div.className = `cycle-item ${isOdd ? 'odd' : 'even'}`;
                    div.innerHTML = `
                        <span>Cycle: ${cycle.map(i => vertices[i].label).join(' ‚Üí ')} ‚Üí ${vertices[cycle[0]].label}</span>
                        <span class="badge ${isOdd ? 'odd' : 'even'}">${isOdd ? 'ODD' : 'EVEN'} (${cycle.length})</span>
                    `;
                    cycleList.appendChild(div);
                });
            }
            
            document.getElementById('cycleDetectorOutput').style.display = 'block';
        }

        function findAllCycles() {
            const cycles = [];
            const visited = new Array(vertices.length).fill(false);
            const recStack = new Array(vertices.length).fill(false);
            const parent = new Array(vertices.length).fill(-1);
            
            function dfs(v, path = []) {
                visited[v] = true;
                recStack[v] = true;
                path.push(v);
                
                for (let [i, j] of edges) {
                    let neighbor = -1;
                    if (i === v) neighbor = j;
                    if (j === v) neighbor = i;
                    
                    if (neighbor !== -1 && neighbor !== parent[v]) {
                        if (recStack[neighbor]) {
                            const cycleStart = path.indexOf(neighbor);
                            if (cycleStart !== -1) {
                                const cycle = path.slice(cycleStart);
                                const cycleStr = cycle.sort().join(',');
                                if (!cycles.some(c => c.sort().join(',') === cycleStr)) {
                                    cycles.push([...cycle]);
                                }
                            }
                        } else if (!visited[neighbor]) {
                            parent[neighbor] = v;
                            dfs(neighbor, [...path]);
                        }
                    }
                }
                
                recStack[v] = false;
            }
            
            for (let i = 0; i < vertices.length; i++) {
                if (!visited[i]) {
                    dfs(i);
                }
            }
            
            return cycles.slice(0, 10); // Limit to first 10 cycles
        }

        function clearColors() {
            vertices.forEach(v => v.color = null);
            draw();
            updateStats();
        }

        function updateStats() {
            document.getElementById('vertexCount').textContent = vertices.length;
            document.getElementById('edgeCount').textContent = edges.length;
            const usedColors = new Set(vertices.filter(v => v.color).map(v => v.color));
            document.getElementById('colorCount').textContent = usedColors.size;
            document.getElementById('chromaticNumber').textContent = currentGraph ? graphs[currentGraph].chromatic : '?';
        }

        function switchMode(mode) {
            document.querySelectorAll('.mode-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.mode-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(mode + 'Mode').classList.add('active');
        }

        // Quiz functionality
        function checkAnswer(element, isCorrect, questionNum, explanation) {
            // Remove any existing selections
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Mark the selected answer
            if (isCorrect) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
            
            // Show feedback
            const feedback = document.getElementById('feedback' + questionNum);
            feedback.innerHTML = explanation;
            feedback.className = 'feedback-box show ' + (isCorrect ? 'correct' : 'incorrect');
            
            // Disable all options for this question
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.onclick = null;
            });
        }

        // Interactive proof functionality
        function toggleProof(element) {
            element.classList.toggle('revealed');
            const icon = element.querySelector('.proof-step-header span:last-child');
            icon.textContent = element.classList.contains('revealed') ? '‚ñº' : '‚ñ∂';
        }

        // Initialize with a default graph
        window.onload = function() {
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            loadGraph('simple');
        };
    </script>
</body>
</html>